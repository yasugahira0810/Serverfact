## host_inventory['user']追加

https://github.com/mizzy/specinfra/commit/340494be494f74e1114f6e1a2f34a6e6514195f6

## アイディア

- namespaceでbefore, after, diffを分けて、taskでhostを指定するやり方だと、  
  事前にhost名のディレクトリを掘るという事前作業が必要。  
  環境変数でhost名渡してディレクトリがない時は作ってもらうようなアーキテクチャーの
  方が使いやすい気がするので、taskでbefore, after, diffを分けて、環境変数でhostを  
  指定するやり方にする。  
  => ツール実行に環境変数の指定が必須なのは如何なものかという感じがしてきたので、  
     上記はやめる。やめて、ディレクトリが存在しないホスト名が指定されたら、  
     エラーで止まるのではなく、全host_inventory&fact実行するような仕組みにする。
- 環境変数で渡したhost名でディレクトリ作って、そこに以下のファイルを保存したい。  
  + info.txt <= 事前に準備してもいいが、なくてもrakeの中で作ってくれる。
  + before.json
  + after.json
  + diff.txt
- jsonを標準出力に吐き出し、それをリダイレクトでファイル保存するようにしたかったが、  
  現状標準出力をリダイレクトしようとすると、json以外に標準出力に出力されるものが  
  jsonの中に入ってしまうため、断念する。json以外の標準出力を抑止する方法がわかれば、  
  標準出力をリダイレクトするような作りに変えたい。
- info.txtにはユーザ名、パスワード、実行対象のhost_inventory, factを記載するつもり  
  だったけど、info.txtという設定ファイルを作ること自体やめる。  
  それぞれ代替の指定の仕方がありそうなことを考慮すると、わざわざ設定ファイルを  
  用意する必要はない気がしてきたため。
  + ユーザ名: SSHのconfig
  + パスワード: spec_helperなり環境変数なり
  + 実行対象のhost_inventory, fact: Rakeでファイルタスクを使って、ファイルがあれば  
    実行対象を限定するようなオプション的なやり方
- こんなタスク設定がいい？

```
rake gather:before
rake gather:after
rake diff:all
rake diff:cpu
rake diff:memory
```
- **思想として、before, afterの情報取得は、取得しておいて損はないので、ユーザに選択権を  
  与えず、全部取ってしまい、diff撮る時に必要なものだけ比較しやすくするつもりでいる。**
- 出力されるjsonはトップレベルで分割した方がいい気がしている。
  + ネストが深くなるの嫌なので、全体的に1つ浅くなるのは嬉しい。
  + ハッシュが同じならまるっと比較すっ飛ばす、みたいな処理ができるようになる。
